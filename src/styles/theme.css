/* --- Font Injection --- */
        @import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css');
        @import url('https://fonts.googleapis.com/css2?family=KoPub+Batang:wght@400;700&display=swap');

        /* --- Redesigned Digital Novel Design System --- */
        :root {
          /* Light Mode Palette */
          --bg-light: #F4F4F5; /* Zinc 100 */
          --panel-bg-light: #FFFFFF;
          --panel-bg-alt-light: #F9FAFB; /* Gray 50 */
          --input-bg-light: #FFFFFF;
          --text-primary-light: #18181B; /* Zinc 900 */
          --text-secondary-light: #71717A; /* Zinc 500 */
          --border-light: #E4E4E7; /* Zinc 200 */
          --accent-light: #4F46E5; /* Indigo 600 */
          --accent-dark-light: #3730A3; /* Indigo 800 */
          --accent-bg-light: #EEF2FF; /* Indigo 50 */
          --accent-shadow-light: #4338ca40;

          /* Dark Mode Palette */
          --bg-dark: #18181B; /* Zinc 900 */
          --panel-bg-dark: #27272A; /* Zinc 800 */
          --panel-bg-alt-dark: #3F3F46; /* Zinc 700 */
          --input-bg-dark: #27272A;
          --text-primary-dark: #F4F4F5; /* Zinc 100 */
          --text-secondary-dark: #A1A1AA; /* Zinc 400 */
          --border-dark: #3F3F46; /* Zinc 700 */
          --accent-dark: #818CF8; /* Indigo 400 */
          --accent-dark-dark: #A78BFA; /* Violet 400 */
          --accent-bg-dark: #3730a333; /* Indigo 800 with alpha */
          --accent-shadow-dark: #6d28d940;
          
          /* Font Family Definitions */
          --font-sans: 'Pretendard', sans-serif;
          --font-serif: 'KoPub Batang', serif;
          --font-mono: 'Menlo', 'Monaco', 'Consolas', monospace;
        }

        [data-theme='light'] {
          --bg: var(--bg-light);
          --panel-bg: var(--panel-bg-light);
          --panel-bg-alt: var(--panel-bg-alt-light);
          --input-bg: var(--input-bg-light);
          --text-primary: var(--text-primary-light);
          --text-secondary: var(--text-secondary-light);
          --border: var(--border-light);
          --accent: var(--accent-light);
          --accent-dark: var(--accent-dark-light);
          --accent-bg: var(--accent-bg-light);
          --accent-shadow: var(--accent-shadow-light);
        }

        [data-theme='dark'] {
          --bg: var(--bg-dark);
          --panel-bg: var(--panel-bg-dark);
          --panel-bg-alt: var(--panel-bg-alt-dark);
          --input-bg: var(--input-bg-dark);
          --text-primary: var(--text-primary-dark);
          --text-secondary: var(--text-secondary-dark);
          --border: var(--border-dark);
          --accent: var(--accent-dark);
          --accent-dark: var(--accent-dark-dark);
          --accent-bg: var(--accent-bg-dark);
          --accent-shadow: var(--accent-shadow-dark);
        }

        body {
          background-color: var(--bg);
          color: var(--text-primary);
          font-family: var(--font-sans);
          transition: background-color 0.3s ease, color 0.3s ease;
          overflow: hidden;
          -webkit-font-smoothing: antialiased;
          -moz-osx-font-smoothing: grayscale;
        }
        
        .panel-ui {
          background-color: var(--panel-bg);
          border-color: var(--border);
          transition: background-color 0.3s ease, border-color 0.3s ease;
        }

        /* --- Custom Scrollbar --- */
        ::-webkit-scrollbar { width: 6px; height: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background-color: var(--border); border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background-color: var(--text-secondary); }

        /* --- Keyframe Animations --- */
        @keyframes fadeIn { from { opacity: 0; transform: translateY(8px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes toast-fade { 0% { opacity: 0; transform: translateY(20px); } 10% { opacity: 1; transform: translateY(0); } 90% { opacity: 1; transform: translateY(0); } 100% { opacity: 0; transform: translateY(20px); } }

        /* --- Animation Classes --- */
        .animate-fadeIn { animation: fadeIn 0.4s ease-in-out forwards; }
        .animate-toast { animation: toast-fade 3s ease-in-out forwards; }